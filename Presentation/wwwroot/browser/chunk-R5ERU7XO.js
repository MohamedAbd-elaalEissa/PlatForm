import{a as v}from"./chunk-N66Y6YH5.js";import{a as b,b as y,c as l,e as g}from"./chunk-IFNCIUGM.js";import{$ as h,G as c,I as d,ea as m,ob as f,s,v as p,w as u}from"./chunk-WMH6ZWCB.js";var U=class o{transform(e,r){let n=Array.isArray(e)?e:[e],i=Array.isArray(r)?r:[r];return n.some(t=>i.some(a=>t?.toLowerCase().includes(a.toLowerCase())))}static \u0275fac=function(r){return new(r||o)};static \u0275pipe=f({name:"includesRole",type:o,pure:!0})};var F=class o{constructor(e){this.http=e}apiUrl=v.apiUrl+"File/";getTeachersFiles(e){return this.http.post(this.apiUrl+"GetTeachersFiles",e)}downloadFile(e,r=!1){return this.http.get(this.apiUrl+"DownloadFile?fileName="+e+"&isBook="+r,{responseType:"blob",observe:"response"})}uploadFile(e){return this.http.post(this.apiUrl+"UploadFilePDF",e)}getStudentAnswer(e){return this.http.post(this.apiUrl+"GetStudentAnswer",e)}getAllAcademicLevels(){return this.http.get(this.apiUrl+"getAllAcademicLevels")}uploadFileChunk(e,r){let n=new b,i=new y("POST",`${this.apiUrl}UploadFileChunk`,e,{headers:n,reportProgress:!0});return this.http.request(i).pipe(p(18e5),u(t=>{if(t.type===l.UploadProgress&&t.total){let a=Math.round(t.loaded/t.total*100);return r&&r(a),null}else if(t.type===l.Response)return t.body;return null}),c(t=>t!==null),d(t=>(console.error("Upload Error:",t),t.status===503?s(()=>new Error("Server timeout. Please try uploading with smaller chunk size or check your internet connection.")):t.status===0?s(()=>new Error("Network error. Please check your internet connection and try again.")):t.status===408?s(()=>new Error("Upload timeout. The upload took too long to complete.")):s(()=>new Error(`Upload failed: ${t.message||"Unknown error"}`)))))}handleError(e){let r="An error occurred";return e.error instanceof ErrorEvent?r=`Client Error: ${e.error.message}`:r=`Server Error: ${e.status} ${e.message}`,console.error("Upload Error:",r,e),s(()=>e)}getTeachersVideos(e){return this.http.post(this.apiUrl+"GetTeachersVideos",e)}checkUploadedChunks(e,r){return this.http.get(this.apiUrl+"CheckUploadedChunks?userId="+e+"&fileName="+r)}getVideoFile(e){return this.http.get(this.apiUrl+"GetVideoFile?fileName="+e)}static \u0275fac=function(r){return new(r||o)(m(g))};static \u0275prov=h({token:o,factory:o.\u0275fac,providedIn:"root"})};export{U as a,F as b};
